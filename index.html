<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¦ê±°ìš´ ì‹œë‹ˆì–´ ìƒí™œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2E7D32;
            --primary-light: #4CAF50;
            --primary-dark: #1B5E20;
            --secondary: #FF8F00;
            --secondary-light: #FFB300;
            --accent: #E65100;
            --bg-cream: #FFF8E7;
            --bg-light: #F5F5DC;
            --text-dark: #2D2D2D;
            --text-muted: #5D5D5D;
            --white: #FFFFFF;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 40px rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-cream);
            color: var(--text-dark);
            font-size: 18px;
            line-height: 1.8;
            min-height: 100vh;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 4px 15px rgba(255,143,0,0.4);
        }

        .logo-text {
            font-family: 'Nanum Myeongjo', serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--white);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .logo-subtitle {
            font-size: 14px;
            color: rgba(255,255,255,0.8);
            margin-top: 5px;
        }

        /* Navigation */
        nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .nav-item {
            position: relative;
        }

        .nav-btn {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            color: var(--white);
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--white);
            color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .nav-btn .arrow {
            font-size: 12px;
            transition: transform 0.3s;
        }

        .nav-item:hover .arrow {
            transform: rotate(180deg);
        }

        /* Dropdown */
        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow-lg);
            padding: 15px 0;
            min-width: 200px;
            max-height: 400px;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .nav-item:hover .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(5px);
        }

        .dropdown-item {
            padding: 12px 25px;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }

        .dropdown-item:hover {
            background: var(--bg-light);
            color: var(--primary);
            padding-left: 30px;
        }

        /* Main Content */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 30px;
            min-height: 70vh;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Home Tab */
        .home-hero {
            text-align: center;
            padding: 60px 0;
        }

        .home-title {
            font-family: 'Nanum Myeongjo', serif;
            font-size: 48px;
            color: var(--primary-dark);
            margin-bottom: 20px;
        }

        .home-subtitle {
            font-size: 22px;
            color: var(--text-muted);
            margin-bottom: 50px;
        }

        /* Search Box */
        .search-container {
            max-width: 800px;
            margin: 0 auto 60px;
            display: flex;
            gap: 15px;
            padding: 10px;
            background: var(--white);
            border-radius: 60px;
            box-shadow: var(--shadow-lg);
        }

        .search-input {
            flex: 1;
            padding: 20px 30px;
            border: none;
            font-size: 20px;
            outline: none;
            background: transparent;
        }

        .search-input::placeholder {
            color: #999;
        }

        .search-btn {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            color: var(--white);
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(230,81,0,0.4);
        }

        .search-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Quick Links */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .quick-link-card {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow);
            border: 3px solid transparent;
        }

        .quick-link-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-lg);
        }

        .quick-link-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 36px;
        }

        .quick-link-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .quick-link-desc {
            color: var(--text-muted);
            font-size: 16px;
        }

        /* Section Title */
        .section-title {
            font-family: 'Nanum Myeongjo', serif;
            font-size: 36px;
            color: var(--primary-dark);
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 4px solid var(--primary-light);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title .icon {
            font-size: 40px;
        }

        /* Content Cards */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .content-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px 25px;
            color: var(--white);
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .card-body {
            padding: 25px;
        }

        .card-item {
            padding: 15px 0;
            border-bottom: 1px dashed #ddd;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .card-item:last-child {
            border-bottom: none;
        }

        .card-item-icon {
            color: var(--secondary);
            font-size: 20px;
            flex-shrink: 0;
        }

        .card-item-text {
            font-size: 17px;
            color: var(--text-dark);
        }

        .card-item-text strong {
            color: var(--primary-dark);
        }

        /* Travel Sub Tabs */
        .travel-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .travel-tab-btn {
            background: var(--bg-light);
            border: 2px solid transparent;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-dark);
        }

        .travel-tab-btn:hover {
            background: var(--primary-light);
            color: var(--white);
        }

        .travel-tab-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary-dark);
        }

        .travel-content {
            display: none;
        }

        .travel-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px;
            color: var(--text-muted);
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--bg-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Results List */
        .results-list {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .result-item {
            padding: 20px;
            border-bottom: 1px solid #eee;
            transition: all 0.2s;
        }

        .result-item:hover {
            background: var(--bg-light);
            border-radius: 10px;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 8px;
        }

        .result-title a {
            color: var(--primary-dark);
            text-decoration: none;
        }

        .result-title a:hover {
            text-decoration: underline;
        }

        .result-desc {
            color: var(--text-muted);
            font-size: 16px;
            margin-bottom: 10px;
        }

        .result-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: 14px;
            color: #888;
        }

        .result-link {
            color: var(--secondary);
            font-size: 14px;
            text-decoration: none;
        }

        .result-link:hover {
            text-decoration: underline;
        }

        /* Region Select */
        .region-select-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .region-select {
            padding: 15px 25px;
            font-size: 18px;
            border: 2px solid var(--primary-light);
            border-radius: 10px;
            background: var(--white);
            color: var(--text-dark);
            cursor: pointer;
            min-width: 200px;
        }

        .region-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(76,175,80,0.2);
        }

        /* Footer */
        footer {
            background: var(--primary-dark);
            color: var(--white);
            padding: 40px 30px;
            text-align: center;
            margin-top: 60px;
        }

        .footer-text {
            font-size: 16px;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo-text {
                font-size: 24px;
            }

            .nav-btn {
                padding: 10px 16px;
                font-size: 16px;
            }

            .home-title {
                font-size: 32px;
            }

            .search-container {
                flex-direction: column;
                border-radius: 20px;
            }

            .search-btn {
                border-radius: 15px;
                justify-content: center;
            }

            .section-title {
                font-size: 28px;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Message Box */
        .message-box {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border-left: 5px solid var(--primary);
            padding: 25px;
            border-radius: 0 15px 15px 0;
            margin-bottom: 30px;
        }

        .message-box p {
            font-size: 18px;
            color: var(--text-dark);
        }

        .message-box.warning {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            border-left-color: var(--secondary);
        }

        .message-box.error {
            background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
            border-left-color: #E53935;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .badge-primary {
            background: var(--primary-light);
            color: var(--white);
        }

        .badge-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .badge-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .badge-blog {
            background: #03C75A;
            color: white;
        }

        .badge-news {
            background: #E53935;
            color: white;
        }

        .badge-local {
            background: #1976D2;
            color: white;
        }

        .badge-encyc {
            background: #7B1FA2;
            color: white;
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .no-results-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        /* API Status */
        .api-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .api-status.connected {
            background: #E8F5E9;
            color: var(--primary-dark);
        }

        .api-status.disconnected {
            background: #FFEBEE;
            color: #C62828;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .status-dot.connected {
            background: var(--primary);
            animation: pulse 2s infinite;
        }

        .status-dot.disconnected {
            background: #E53935;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">ğŸŒ¿</div>
                <div>
                    <div class="logo-text">ì¦ê±°ìš´ ì‹œë‹ˆì–´ ìƒí™œ</div>
                    <div class="logo-subtitle">ê±´ê°•í•˜ê³  í–‰ë³µí•œ ë…¸í›„ë¥¼ ìœ„í•œ ì¢…í•© ì •ë³´ í¬í„¸</div>
                </div>
            </div>
            <nav>
                <div class="nav-item">
                    <button class="nav-btn active" onclick="showTab('home', this)">ğŸ  í™ˆ</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showTab('welfare', this)">ğŸ›ï¸ ë³µì§€í–‰ì •</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showTab('health', this)">ğŸ’ª ê±´ê°•</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showTab('rural', this)">ğŸ¡ ì „ì›ìƒí™œ</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showTab('hobby', this)">ğŸ¨ ì·¨ë¯¸</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showTab('travel', this)">âœˆï¸ ì—¬í–‰</button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn">ğŸ“ ì§€ì—­ì„ íƒ <span class="arrow">â–¼</span></button>
                    <div class="dropdown" id="regionDropdown">
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- í™ˆ íƒ­ -->
        <div id="home" class="tab-content active">
            <div class="home-hero">
                <h1 class="home-title">ğŸŒ¸ ì¦ê±°ìš´ ì‹œë‹ˆì–´ ìƒí™œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</h1>
                <p class="home-subtitle">ê±´ê°•, ì·¨ë¯¸, ì—¬í–‰, ë³µì§€ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”</p>
                
                <div class="search-container">
                    <input type="text" class="search-input" id="mainSearchInput" placeholder="ê¶ê¸ˆí•˜ì‹  ë‚´ìš©ì„ ê²€ìƒ‰í•´ ë³´ì„¸ìš” (ì˜ˆ: ë…¸ì¸ ì¼ìë¦¬, ë“±ì‚° ë™í˜¸íšŒ, ê·€ì´Œ ì§€ì›)">
                    <button class="search-btn" id="mainSearchBtn" onclick="performMainSearch()">
                        ğŸ” ê²€ìƒ‰í•˜ê¸°
                    </button>
                </div>
            </div>

            <div class="quick-links">
                <div class="quick-link-card" onclick="showTab('welfare')">
                    <div class="quick-link-icon">ğŸ›ï¸</div>
                    <div class="quick-link-title">ë³µì§€í–‰ì •</div>
                    <div class="quick-link-desc">ì‹œë‹ˆì–´ë¥¼ ìœ„í•œ ê°ì¢… ë³µì§€í˜œíƒê³¼ ì§€ì›ì •ì±…ì„ í™•ì¸í•˜ì„¸ìš”</div>
                </div>
                <div class="quick-link-card" onclick="showTab('health')">
                    <div class="quick-link-icon">ğŸ’ª</div>
                    <div class="quick-link-title">ê±´ê°•ì •ë³´</div>
                    <div class="quick-link-desc">ê±´ê°•í•œ ë…¸í›„ë¥¼ ìœ„í•œ ì§ˆë³‘ ì˜ˆë°©ê³¼ ê±´ê°•ê´€ë¦¬ ì •ë³´</div>
                </div>
                <div class="quick-link-card" onclick="showTab('hobby')">
                    <div class="quick-link-icon">ğŸ¨</div>
                    <div class="quick-link-title">ì·¨ë¯¸í™œë™</div>
                    <div class="quick-link-desc">ë‹¤ì–‘í•œ ì·¨ë¯¸í™œë™ê³¼ ë™í˜¸íšŒ ì •ë³´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”</div>
                </div>
                <div class="quick-link-card" onclick="showTab('travel')">
                    <div class="quick-link-icon">âœˆï¸</div>
                    <div class="quick-link-title">ì—¬í–‰ì •ë³´</div>
                    <div class="quick-link-desc">ì „êµ­ ëª…ì†Œì™€ ì•„ë¦„ë‹¤ìš´ ì—¬í–‰ì§€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤</div>
                </div>
                <div class="quick-link-card" onclick="showTab('rural')">
                    <div class="quick-link-icon">ğŸ¡</div>
                    <div class="quick-link-title">ì „ì›ìƒí™œ</div>
                    <div class="quick-link-desc">ê·€ë†Â·ê·€ì´Œ ì§€ì›ì •ì±…ê³¼ ì „ì›ìƒí™œ ì •ë³´</div>
                </div>
            </div>

            <div id="mainSearchResults" style="margin-top: 40px;"></div>
        </div>

        <!-- ë³µì§€í–‰ì • íƒ­ -->
        <div id="welfare" class="tab-content">
            <h2 class="section-title"><span class="icon">ğŸ›ï¸</span> ë³µì§€í–‰ì • ì •ë³´</h2>
            
            <div class="message-box">
                <p>ğŸ“¢ ì‹œë‹ˆì–´ ì—¬ëŸ¬ë¶„ì„ ìœ„í•œ ë‹¤ì–‘í•œ ë³µì§€í˜œíƒì„ ì§€ì—­ë³„ë¡œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ìš°ì²˜, ì§€ì›ê¸ˆ, ì˜ë£Œë¹„ ì§€ì› ë“± ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!</p>
            </div>

            <div class="region-select-container">
                <select class="region-select" id="welfareRegion" onchange="updateDistricts('welfare')">
                    <option value="">-- ì‹œ/ë„ ì„ íƒ --</option>
                </select>
                <select class="region-select" id="welfareDistrict">
                    <option value="">-- êµ¬/êµ° ì„ íƒ --</option>
                </select>
                <button class="search-btn" onclick="searchWelfare()">ğŸ” ë³µì§€ì •ë³´ ê²€ìƒ‰</button>
            </div>

            <div id="welfareResults"></div>
        </div>

        <!-- ê±´ê°• íƒ­ -->
        <div id="health" class="tab-content">
            <h2 class="section-title"><span class="icon">ğŸ’ª</span> ê±´ê°• ì •ë³´</h2>
            
            <div class="message-box">
                <p>ğŸ¥ ë…¸ì¸ì„± ì§ˆí™˜ì˜ ì˜ˆë°©ê³¼ ê´€ë¦¬, ê±´ê°•ë³´ì¡°ì œ, ë¯¼ê°„ìš”ë²• ë“± ê±´ê°•í•œ ë…¸í›„ë¥¼ ìœ„í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            </div>

            <div class="region-select-container">
                <select class="region-select" id="healthCategory">
                    <option value="">-- ì¹´í…Œê³ ë¦¬ ì„ íƒ --</option>
                    <option value="ë‹¹ë‡¨ë³‘">ë‹¹ë‡¨ë³‘</option>
                    <option value="ê³ í˜ˆì••">ê³ í˜ˆì••</option>
                    <option value="ê´€ì ˆì—¼">ê´€ì ˆì—¼</option>
                    <option value="ì¹˜ë§¤">ì¹˜ë§¤ ì˜ˆë°©</option>
                    <option value="ì‹¬ì¥ì§ˆí™˜">ì‹¬ì¥ì§ˆí™˜</option>
                    <option value="ê³¨ë‹¤ê³µì¦">ê³¨ë‹¤ê³µì¦</option>
                    <option value="ê±´ê°•ë³´ì¡°ì œ">ê±´ê°•ë³´ì¡°ì œ</option>
                    <option value="ë¯¼ê°„ìš”ë²•">ë¯¼ê°„ìš”ë²•</option>
                </select>
                <button class="search-btn" onclick="searchHealth()">ğŸ” ê±´ê°•ì •ë³´ ê²€ìƒ‰</button>
            </div>

            <div id="healthResults"></div>
        </div>

        <!-- ì „ì›ìƒí™œ íƒ­ -->
        <div id="rural" class="tab-content">
            <h2 class="section-title"><span class="icon">ğŸ¡</span> ì „ì›ìƒí™œ ì •ë³´</h2>
            
            <div class="message-box">
                <p>ğŸŒ¾ ê·€ë†Â·ê·€ì´Œì„ ê¿ˆê¾¸ì‹œë‚˜ìš”? ê° ì§€ìì²´ì˜ ì§€ì›ì •ì±…ê³¼ ì „ì›ìƒí™œì— ì í•©í•œ ì§€ì—­ ì •ë³´ë¥¼ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.</p>
            </div>

            <div class="region-select-container">
                <select class="region-select" id="ruralRegion">
                    <option value="">-- ì‹œ/ë„ ì„ íƒ --</option>
                </select>
                <button class="search-btn" onclick="searchRural()">ğŸ” ê·€ì´Œì •ë³´ ê²€ìƒ‰</button>
            </div>

            <div id="ruralResults"></div>
        </div>

        <!-- ì·¨ë¯¸ íƒ­ -->
        <div id="hobby" class="tab-content">
            <h2 class="section-title"><span class="icon">ğŸ¨</span> ì·¨ë¯¸í™œë™ ì •ë³´</h2>
            
            <div class="message-box">
                <p>ğŸ­ ë‹¤ì–‘í•œ ì·¨ë¯¸í™œë™ìœ¼ë¡œ í™œê¸°ì°¬ ë…¸í›„ë¥¼ ë³´ë‚´ì„¸ìš”! ë™í˜¸íšŒ ì •ë³´ì™€ í•„ìš”í•œ ì¥ë¹„ ì •ë³´ë„ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.</p>
            </div>

            <div class="region-select-container">
                <select class="region-select" id="hobbyCategory">
                    <option value="">-- ì·¨ë¯¸ ì„ íƒ --</option>
                    <option value="ë“±ì‚°">ë“±ì‚°</option>
                    <option value="ë‚šì‹œ">ë‚šì‹œ</option>
                    <option value="ê³¨í”„">ê³¨í”„</option>
                    <option value="ì‚¬ì§„">ì‚¬ì§„ì´¬ì˜</option>
                    <option value="ì„œì˜ˆ">ì„œì˜ˆ/ìº˜ë¦¬ê·¸ë¼í”¼</option>
                    <option value="ëŒ„ìŠ¤">ëŒ„ìŠ¤/ì¶¤</option>
                    <option value="ì•…ê¸°">ì•…ê¸°ì—°ì£¼</option>
                    <option value="í…ƒë°­">í…ƒë°­ê°€ê¾¸ê¸°</option>
                    <option value="ìˆ˜ì˜">ìˆ˜ì˜/ìˆ˜ì¤‘ìš´ë™</option>
                    <option value="ë°”ë‘‘">ë°”ë‘‘/ì¥ê¸°</option>
                </select>
                <select class="region-select" id="hobbyRegion">
                    <option value="">-- ì§€ì—­ ì„ íƒ --</option>
                </select>
                <button class="search-btn" onclick="searchHobby()">ğŸ” ì·¨ë¯¸ì •ë³´ ê²€ìƒ‰</button>
            </div>

            <div id="hobbyResults"></div>
        </div>

        <!-- ì—¬í–‰ íƒ­ -->
        <div id="travel" class="tab-content">
            <h2 class="section-title"><span class="icon">âœˆï¸</span> ì—¬í–‰ ì •ë³´</h2>
            
            <div class="message-box">
                <p>ğŸ—ºï¸ ì•„ë¦„ë‹¤ìš´ ëŒ€í•œë¯¼êµ­ êµ¬ì„êµ¬ì„ì„ ì—¬í–‰í•´ ë³´ì„¸ìš”! ëª…ì‚°, ìˆ²ê¸¸, ê´€ê´‘ì§€, ë§›ì§‘ ë“± ë‹¤ì–‘í•œ ì—¬í–‰ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            </div>

            <div class="travel-tabs">
                <button class="travel-tab-btn active" onclick="showTravelTab('mountains', this)">ğŸ”ï¸ 100ëŒ€ ëª…ì‚°</button>
                <button class="travel-tab-btn" onclick="showTravelTab('forest', this)">ğŸŒ² ìˆ²ê¸¸</button>
                <button class="travel-tab-btn" onclick="showTravelTab('tourist', this)">ğŸ¡ ê´€ê´‘ì§€</button>
                <button class="travel-tab-btn" onclick="showTravelTab('food', this)">ğŸœ ë§›ì§‘</button>
                <button class="travel-tab-btn" onclick="showTravelTab('walking', this)">ğŸš¶ ê±·ê¸°ì¢‹ì€ê¸¸</button>
                <button class="travel-tab-btn" onclick="showTravelTab('cherry', this)">ğŸŒ¸ ë²šê½ƒê¸¸</button>
                <button class="travel-tab-btn" onclick="showTravelTab('snow', this)">â„ï¸ ì„¤ê²½</button>
                <button class="travel-tab-btn" onclick="showTravelTab('garden', this)">ğŸŒ· ì •ì›</button>
                <button class="travel-tab-btn" onclick="showTravelTab('history', this)">ğŸ›ï¸ ì—­ì‚¬íƒë°©</button>
                <button class="travel-tab-btn" onclick="showTravelTab('filming', this)">ğŸ¬ ì´¬ì˜ì§€</button>
                <button class="travel-tab-btn" onclick="showTravelTab('temple', this)">ğŸ›• ì‚¬ì°°</button>
                <button class="travel-tab-btn" onclick="showTravelTab('market', this)">ğŸ›’ ì˜¤ì¼ì¥</button>
                <button class="travel-tab-btn" onclick="showTravelTab('festival', this)">ğŸ‰ ì¶•ì œ</button>
                <button class="travel-tab-btn" onclick="showTravelTab('recreation', this)">ğŸ•ï¸ íœ´ì–‘ë¦¼</button>
                <button class="travel-tab-btn" onclick="showTravelTab('arboretum', this)">ğŸŒ³ ìˆ˜ëª©ì›</button>
                <button class="travel-tab-btn" onclick="showTravelTab('botanical', this)">ğŸŒº ì‹ë¬¼ì›</button>
                <button class="travel-tab-btn" onclick="showTravelTab('museum', this)">ğŸ›ï¸ ë°•ë¬¼ê´€</button>
                <button class="travel-tab-btn" onclick="showTravelTab('cafe', this)">â˜• ì¹´í˜</button>
                <button class="travel-tab-btn" onclick="showTravelTab('breakwater', this)">ğŸ£ ë°©íŒŒì œë‚šì‹œ</button>
                <button class="travel-tab-btn" onclick="showTravelTab('platform', this)">ğŸŸ ì¢ŒëŒ€ë‚šì‹œ</button>
                <button class="travel-tab-btn" onclick="showTravelTab('indoor', this)">ğŸ  ì‹¤ë‚´ë‚šì‹œ</button>
                <button class="travel-tab-btn" onclick="showTravelTab('pension', this)">ğŸŒŠ ë°”ë‹¤íœì…˜</button>
                <button class="travel-tab-btn" onclick="showTravelTab('autumn', this)">ğŸ‚ ë‹¨í’ê¸¸</button>
            </div>

            <div id="travelResults"></div>
        </div>
    </main>

    <footer>
        <p class="footer-text">Â© 2025 ì¦ê±°ìš´ ì‹œë‹ˆì–´ ìƒí™œ | ê±´ê°•í•˜ê³  í–‰ë³µí•œ ë…¸í›„ë¥¼ ì‘ì›í•©ë‹ˆë‹¤ ğŸŒ¿</p>
    </footer>

    <!-- API ìƒíƒœ í‘œì‹œ -->
    <div class="api-status disconnected" id="apiStatus">
        <span class="status-dot disconnected"></span>
        <span id="apiStatusText">API ì—°ê²° ëŒ€ê¸°ì¤‘</span>
    </div>

    <script>
        // ============================================
        // ì„¤ì • - API URL ì ìš©ë¨!
        // ============================================
        const CONFIG = {
            API_URL: 'https://script.google.com/macros/s/AKfycbyMgrZYe8bYbO__Ls4zoUnN-ZkDhxQIBN7P9sRt9dJR_-55ZrhKuE6uyJDQUQynZ37z/exec',
            DEBUG: true
        };

        // ============================================
        // ì‹œë„/êµ¬êµ° ë°ì´í„°
        // ============================================
        const regions = {
            'ì„œìš¸íŠ¹ë³„ì‹œ': ['ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê´€ì•…êµ¬', 'ê´‘ì§„êµ¬', 'êµ¬ë¡œêµ¬', 'ê¸ˆì²œêµ¬', 'ë…¸ì›êµ¬', 'ë„ë´‰êµ¬', 'ë™ëŒ€ë¬¸êµ¬', 'ë™ì‘êµ¬', 'ë§ˆí¬êµ¬', 'ì„œëŒ€ë¬¸êµ¬', 'ì„œì´ˆêµ¬', 'ì„±ë™êµ¬', 'ì„±ë¶êµ¬', 'ì†¡íŒŒêµ¬', 'ì–‘ì²œêµ¬', 'ì˜ë“±í¬êµ¬', 'ìš©ì‚°êµ¬', 'ì€í‰êµ¬', 'ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ì¤‘ë‘êµ¬'],
            'ë¶€ì‚°ê´‘ì—­ì‹œ': ['ê°•ì„œêµ¬', 'ê¸ˆì •êµ¬', 'ê¸°ì¥êµ°', 'ë‚¨êµ¬', 'ë™êµ¬', 'ë™ë˜êµ¬', 'ë¶€ì‚°ì§„êµ¬', 'ë¶êµ¬', 'ì‚¬ìƒêµ¬', 'ì‚¬í•˜êµ¬', 'ì„œêµ¬', 'ìˆ˜ì˜êµ¬', 'ì—°ì œêµ¬', 'ì˜ë„êµ¬', 'ì¤‘êµ¬', 'í•´ìš´ëŒ€êµ¬'],
            'ëŒ€êµ¬ê´‘ì—­ì‹œ': ['ë‚¨êµ¬', 'ë‹¬ì„œêµ¬', 'ë‹¬ì„±êµ°', 'ë™êµ¬', 'ë¶êµ¬', 'ì„œêµ¬', 'ìˆ˜ì„±êµ¬', 'ì¤‘êµ¬'],
            'ì¸ì²œê´‘ì—­ì‹œ': ['ê°•í™”êµ°', 'ê³„ì–‘êµ¬', 'ë¯¸ì¶”í™€êµ¬', 'ë‚¨ë™êµ¬', 'ë™êµ¬', 'ë¶€í‰êµ¬', 'ì„œêµ¬', 'ì—°ìˆ˜êµ¬', 'ì˜¹ì§„êµ°', 'ì¤‘êµ¬'],
            'ê´‘ì£¼ê´‘ì—­ì‹œ': ['ê´‘ì‚°êµ¬', 'ë‚¨êµ¬', 'ë™êµ¬', 'ë¶êµ¬', 'ì„œêµ¬'],
            'ëŒ€ì „ê´‘ì—­ì‹œ': ['ëŒ€ë•êµ¬', 'ë™êµ¬', 'ì„œêµ¬', 'ìœ ì„±êµ¬', 'ì¤‘êµ¬'],
            'ìš¸ì‚°ê´‘ì—­ì‹œ': ['ë‚¨êµ¬', 'ë™êµ¬', 'ë¶êµ¬', 'ìš¸ì£¼êµ°', 'ì¤‘êµ¬'],
            'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ': ['ì„¸ì¢…ì‹œ'],
            'ê²½ê¸°ë„': ['ê°€í‰êµ°', 'ê³ ì–‘ì‹œ', 'ê³¼ì²œì‹œ', 'ê´‘ëª…ì‹œ', 'ê´‘ì£¼ì‹œ', 'êµ¬ë¦¬ì‹œ', 'êµ°í¬ì‹œ', 'ê¹€í¬ì‹œ', 'ë‚¨ì–‘ì£¼ì‹œ', 'ë™ë‘ì²œì‹œ', 'ë¶€ì²œì‹œ', 'ì„±ë‚¨ì‹œ', 'ìˆ˜ì›ì‹œ', 'ì‹œí¥ì‹œ', 'ì•ˆì‚°ì‹œ', 'ì•ˆì„±ì‹œ', 'ì•ˆì–‘ì‹œ', 'ì–‘ì£¼ì‹œ', 'ì–‘í‰êµ°', 'ì—¬ì£¼ì‹œ', 'ì—°ì²œêµ°', 'ì˜¤ì‚°ì‹œ', 'ìš©ì¸ì‹œ', 'ì˜ì™•ì‹œ', 'ì˜ì •ë¶€ì‹œ', 'ì´ì²œì‹œ', 'íŒŒì£¼ì‹œ', 'í‰íƒì‹œ', 'í¬ì²œì‹œ', 'í•˜ë‚¨ì‹œ', 'í™”ì„±ì‹œ'],
            'ê°•ì›ë„': ['ê°•ë¦‰ì‹œ', 'ê³ ì„±êµ°', 'ë™í•´ì‹œ', 'ì‚¼ì²™ì‹œ', 'ì†ì´ˆì‹œ', 'ì–‘êµ¬êµ°', 'ì–‘ì–‘êµ°', 'ì˜ì›”êµ°', 'ì›ì£¼ì‹œ', 'ì¸ì œêµ°', 'ì •ì„ êµ°', 'ì² ì›êµ°', 'ì¶˜ì²œì‹œ', 'íƒœë°±ì‹œ', 'í‰ì°½êµ°', 'í™ì²œêµ°', 'í™”ì²œêµ°', 'íš¡ì„±êµ°'],
            'ì¶©ì²­ë¶ë„': ['ê´´ì‚°êµ°', 'ë‹¨ì–‘êµ°', 'ë³´ì€êµ°', 'ì˜ë™êµ°', 'ì˜¥ì²œêµ°', 'ìŒì„±êµ°', 'ì œì²œì‹œ', 'ì¦í‰êµ°', 'ì§„ì²œêµ°', 'ì²­ì£¼ì‹œ', 'ì¶©ì£¼ì‹œ'],
            'ì¶©ì²­ë‚¨ë„': ['ê³„ë£¡ì‹œ', 'ê³µì£¼ì‹œ', 'ê¸ˆì‚°êµ°', 'ë…¼ì‚°ì‹œ', 'ë‹¹ì§„ì‹œ', 'ë³´ë ¹ì‹œ', 'ë¶€ì—¬êµ°', 'ì„œì‚°ì‹œ', 'ì„œì²œêµ°', 'ì•„ì‚°ì‹œ', 'ì˜ˆì‚°êµ°', 'ì²œì•ˆì‹œ', 'ì²­ì–‘êµ°', 'íƒœì•ˆêµ°', 'í™ì„±êµ°'],
            'ì „ë¼ë¶ë„': ['ê³ ì°½êµ°', 'êµ°ì‚°ì‹œ', 'ê¹€ì œì‹œ', 'ë‚¨ì›ì‹œ', 'ë¬´ì£¼êµ°', 'ë¶€ì•ˆêµ°', 'ìˆœì°½êµ°', 'ì™„ì£¼êµ°', 'ìµì‚°ì‹œ', 'ì„ì‹¤êµ°', 'ì¥ìˆ˜êµ°', 'ì „ì£¼ì‹œ', 'ì •ìì‹œ', 'ì§„ì•ˆêµ°'],
            'ì „ë¼ë‚¨ë„': ['ê°•ì§„êµ°', 'ê³ í¥êµ°', 'ê³¡ì„±êµ°', 'ê´‘ì–‘ì‹œ', 'êµ¬ë¡€êµ°', 'ë‚˜ì£¼ì‹œ', 'ë‹´ì–‘êµ°', 'ëª©í¬ì‹œ', 'ë¬´ì•ˆêµ°', 'ë³´ì„±êµ°', 'ìˆœì²œì‹œ', 'ì‹ ì•ˆêµ°', 'ì—¬ìˆ˜ì‹œ', 'ì˜ê´‘êµ°', 'ì˜ì•”êµ°', 'ì™„ë„êµ°', 'ì¥ì„±êµ°', 'ì¥í¥êµ°', 'ì§„ë„êµ°', 'í•¨í‰êµ°', 'í•´ë‚¨êµ°', 'í™”ìˆœêµ°'],
            'ê²½ìƒë¶ë„': ['ê²½ì‚°ì‹œ', 'ê²½ì£¼ì‹œ', 'ê³ ë ¹êµ°', 'êµ¬ë¯¸ì‹œ', 'êµ°ìœ„êµ°', 'ê¹€ì²œì‹œ', 'ë¬¸ê²½ì‹œ', 'ë´‰í™”êµ°', 'ìƒì£¼ì‹œ', 'ì„±ì£¼êµ°', 'ì•ˆë™ì‹œ', 'ì˜ë•êµ°', 'ì˜ì–‘êµ°', 'ì˜ì£¼ì‹œ', 'ì˜ì²œì‹œ', 'ì˜ˆì²œêµ°', 'ìš¸ë¦‰êµ°', 'ìš¸ì§„êµ°', 'ì˜ì„±êµ°', 'ì²­ë„êµ°', 'ì²­ì†¡êµ°', 'ì¹ ê³¡êµ°', 'í¬í•­ì‹œ'],
            'ê²½ìƒë‚¨ë„': ['ê±°ì œì‹œ', 'ê±°ì°½êµ°', 'ê³ ì„±êµ°', 'ê¹€í•´ì‹œ', 'ë‚¨í•´êµ°', 'ë°€ì–‘ì‹œ', 'ì‚¬ì²œì‹œ', 'ì‚°ì²­êµ°', 'ì–‘ì‚°ì‹œ', 'ì˜ë ¹êµ°', 'ì§„ì£¼ì‹œ', 'ì°½ë…•êµ°', 'ì°½ì›ì‹œ', 'í†µì˜ì‹œ', 'í•˜ë™êµ°', 'í•¨ì•ˆêµ°', 'í•¨ì–‘êµ°', 'í•©ì²œêµ°'],
            'ì œì£¼íŠ¹ë³„ìì¹˜ë„': ['ì„œê·€í¬ì‹œ', 'ì œì£¼ì‹œ']
        };

        // ì—¬í–‰ ì¹´í…Œê³ ë¦¬ í•œê¸€ ë§¤í•‘
        const travelCategoryMap = {
            'mountains': '100ëŒ€ëª…ì‚°',
            'forest': 'ìˆ²ê¸¸',
            'tourist': 'ê´€ê´‘ì§€',
            'food': 'ë§›ì§‘',
            'walking': 'ê±·ê¸°ì¢‹ì€ê¸¸',
            'cherry': 'ë²šê½ƒëª…ì†Œ',
            'snow': 'ì„¤ê²½ëª…ì†Œ',
            'garden': 'ì •ì›',
            'history': 'ì—­ì‚¬íƒë°©',
            'filming': 'ì´¬ì˜ì§€',
            'temple': 'ì‚¬ì°°',
            'market': 'ì˜¤ì¼ì¥',
            'festival': 'ì¶•ì œ',
            'recreation': 'íœ´ì–‘ë¦¼',
            'arboretum': 'ìˆ˜ëª©ì›',
            'botanical': 'ì‹ë¬¼ì›',
            'museum': 'ë°•ë¬¼ê´€',
            'cafe': 'ì¹´í˜',
            'breakwater': 'ë°©íŒŒì œë‚šì‹œ',
            'platform': 'ì¢ŒëŒ€ë‚šì‹œ',
            'indoor': 'ì‹¤ë‚´ë‚šì‹œ',
            'pension': 'ë°”ë‹¤íœì…˜',
            'autumn': 'ë‹¨í’ëª…ì†Œ'
        };

        // í˜„ì¬ ì—¬í–‰ íƒ­
        let currentTravelTab = 'mountains';

        // ============================================
        // ì´ˆê¸°í™”
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            initializeRegionDropdowns();
            checkApiConnection();
            
            // ì´ˆê¸° ì—¬í–‰ ë°ì´í„° ë¡œë“œ
            searchTravel('mountains');
        });

        // ============================================
        // API í†µì‹  í•¨ìˆ˜
        // ============================================
        async function callApi(params) {
            const url = new URL(CONFIG.API_URL);
            Object.keys(params).forEach(key => {
                if (params[key]) url.searchParams.append(key, params[key]);
            });
            
            if (CONFIG.DEBUG) console.log('API í˜¸ì¶œ:', url.toString());
            
            try {
                const response = await fetch(url.toString());
                const data = await response.json();
                
                if (CONFIG.DEBUG) console.log('API ì‘ë‹µ:', data);
                
                return data;
            } catch (error) {
                console.error('API ì˜¤ë¥˜:', error);
                return { success: false, error: error.message };
            }
        }

        // API ì—°ê²° í™•ì¸
        async function checkApiConnection() {
            const statusEl = document.getElementById('apiStatus');
            const statusText = document.getElementById('apiStatusText');
            const statusDot = statusEl.querySelector('.status-dot');
            
            try {
                const result = await callApi({ action: 'test' });
                
                if (result.success) {
                    statusEl.className = 'api-status connected';
                    statusDot.className = 'status-dot connected';
                    statusText.textContent = 'API ì—°ê²°ë¨';
                } else {
                    throw new Error('Invalid response');
                }
            } catch (error) {
                statusEl.className = 'api-status disconnected';
                statusDot.className = 'status-dot disconnected';
                statusText.textContent = 'API ì—°ê²° ì‹¤íŒ¨';
            }
        }

        // ============================================
        // ì§€ì—­ ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
        // ============================================
        function initializeRegionDropdowns() {
            const regionDropdown = document.getElementById('regionDropdown');
            const welfareRegion = document.getElementById('welfareRegion');
            const ruralRegion = document.getElementById('ruralRegion');
            const hobbyRegion = document.getElementById('hobbyRegion');

            // ë„¤ë¹„ê²Œì´ì…˜ ë“œë¡­ë‹¤ìš´
            for (const region of Object.keys(regions)) {
                const item = document.createElement('div');
                item.className = 'dropdown-item';
                item.textContent = region;
                item.onclick = () => selectRegion(region);
                regionDropdown.appendChild(item);
            }

            // ê° íƒ­ì˜ ì‹œë„ ì„ íƒ
            [welfareRegion, ruralRegion, hobbyRegion].forEach(select => {
                if (select) {
                    for (const region of Object.keys(regions)) {
                        const option = document.createElement('option');
                        option.value = region;
                        option.textContent = region;
                        select.appendChild(option);
                    }
                }
            });
        }

        // êµ¬êµ° ì—…ë°ì´íŠ¸
        function updateDistricts(tabName) {
            const regionSelect = document.getElementById(tabName + 'Region');
            const districtSelect = document.getElementById(tabName + 'District');
            
            if (!districtSelect) return;
            
            districtSelect.innerHTML = '<option value="">-- êµ¬/êµ° ì„ íƒ --</option>';
            
            if (regionSelect.value && regions[regionSelect.value]) {
                regions[regionSelect.value].forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            }
        }

        // ============================================
        // íƒ­ ì „í™˜
        // ============================================
        function showTab(tabId, btnEl) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabId).classList.add('active');

            if (btnEl) {
                btnEl.classList.add('active');
            }
        }

        // ì—¬í–‰ ì„œë¸Œ íƒ­ ì „í™˜
        function showTravelTab(tabId, btnEl) {
            currentTravelTab = tabId;
            
            document.querySelectorAll('.travel-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            if (btnEl) {
                btnEl.classList.add('active');
            }

            searchTravel(tabId);
        }

        // ì§€ì—­ ì„ íƒ
        function selectRegion(region) {
            alert(region + ' ì§€ì—­ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ============================================
        // ê²€ìƒ‰ í•¨ìˆ˜ë“¤
        // ============================================
        
        // ë©”ì¸ ê²€ìƒ‰
        async function performMainSearch() {
            const query = document.getElementById('mainSearchInput').value;
            if (!query.trim()) {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
                return;
            }

            const resultsDiv = document.getElementById('mainSearchResults');
            const searchBtn = document.getElementById('mainSearchBtn');
            
            searchBtn.disabled = true;
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>"${query}" ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ action: 'naverSearch', query: query });
                
                if (result.success && result.results && result.results.length > 0) {
                    resultsDiv.innerHTML = renderNaverResults(result.results, query);
                } else {
                    resultsDiv.innerHTML = renderNoResults(query);
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
            
            searchBtn.disabled = false;
        }

        // ë³µì§€ ê²€ìƒ‰
        async function searchWelfare() {
            const region = document.getElementById('welfareRegion').value;
            const district = document.getElementById('welfareDistrict').value;
            
            const resultsDiv = document.getElementById('welfareResults');
            
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>ë³µì§€ì •ë³´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ 
                    action: 'getWelfare', 
                    region: region,
                    district: district 
                });
                
                if (result.success && result.results && result.results.length > 0) {
                    resultsDiv.innerHTML = renderNaverResults(result.results, (region || '') + ' ë³µì§€í˜œíƒ');
                } else {
                    resultsDiv.innerHTML = renderNoResults('ë³µì§€ì •ë³´');
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
        }

        // ê±´ê°• ê²€ìƒ‰
        async function searchHealth() {
            const category = document.getElementById('healthCategory').value;
            
            const resultsDiv = document.getElementById('healthResults');
            
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>ê±´ê°•ì •ë³´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ 
                    action: 'getHealth', 
                    category: category 
                });
                
                if (result.success && result.results && result.results.length > 0) {
                    resultsDiv.innerHTML = renderNaverResults(result.results, category || 'ê±´ê°•ì •ë³´');
                } else {
                    resultsDiv.innerHTML = renderNoResults('ê±´ê°•ì •ë³´');
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
        }

        // ì „ì›ìƒí™œ ê²€ìƒ‰
        async function searchRural() {
            const region = document.getElementById('ruralRegion').value;
            
            const resultsDiv = document.getElementById('ruralResults');
            
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>ê·€ì´Œì •ë³´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ 
                    action: 'getRural', 
                    region: region 
                });
                
                if (result.success && result.results && result.results.length > 0) {
                    resultsDiv.innerHTML = renderNaverResults(result.results, (region || '') + ' ê·€ë†ê·€ì´Œ');
                } else {
                    resultsDiv.innerHTML = renderNoResults('ì „ì›ìƒí™œ ì •ë³´');
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
        }

        // ì·¨ë¯¸ ê²€ìƒ‰
        async function searchHobby() {
            const category = document.getElementById('hobbyCategory').value;
            const region = document.getElementById('hobbyRegion').value;
            
            const resultsDiv = document.getElementById('hobbyResults');
            
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>ì·¨ë¯¸ì •ë³´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ 
                    action: 'getHobby', 
                    category: category,
                    region: region
                });
                
                if (result.success && result.results && result.results.length > 0) {
                    resultsDiv.innerHTML = renderNaverResults(result.results, (category || 'ì·¨ë¯¸') + ' ë™í˜¸íšŒ');
                } else {
                    resultsDiv.innerHTML = renderNoResults('ì·¨ë¯¸ì •ë³´');
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
        }

        // ì—¬í–‰ ê²€ìƒ‰
        async function searchTravel(category) {
            const resultsDiv = document.getElementById('travelResults');
            const koreanCategory = travelCategoryMap[category] || category;
            
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>${koreanCategory} ì •ë³´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            `;

            try {
                const result = await callApi({ 
                    action: 'getTravel', 
                    category: category 
                });
                
                if (result.success && result.results && result.results.length > 0) {
                    // ì§€ì—­ ê²€ìƒ‰ ê²°ê³¼ì¸ì§€ ì¼ë°˜ ê²€ìƒ‰ ê²°ê³¼ì¸ì§€ í™•ì¸
                    if (result.results[0].address || result.results[0].roadAddress) {
                        resultsDiv.innerHTML = renderLocalResults(result.results, koreanCategory);
                    } else {
                        resultsDiv.innerHTML = renderNaverResults(result.results, koreanCategory);
                    }
                } else {
                    resultsDiv.innerHTML = renderNoResults(koreanCategory);
                }
            } catch (error) {
                resultsDiv.innerHTML = renderError(error.message);
            }
        }

        // ============================================
        // ê²°ê³¼ ë Œë”ë§ í•¨ìˆ˜ë“¤ (ë„¤ì´ë²„ APIìš©)
        // ============================================
        
        function renderNaverResults(results, query) {
            let html = `
                <div class="results-list">
                    <h3 style="margin-bottom: 20px; color: var(--primary-dark);">
                        ğŸ” "${query}" ê²€ìƒ‰ ê²°ê³¼ (${results.length}ê±´)
                    </h3>
            `;
            
            results.forEach(item => {
                const source = item.source || '';
                let badgeClass = 'badge-primary';
                if (source === 'ë¸”ë¡œê·¸') badgeClass = 'badge-blog';
                else if (source === 'ë‰´ìŠ¤') badgeClass = 'badge-news';
                
                html += `
                    <div class="result-item">
                        <div class="result-title">
                            <a href="${item.link}" target="_blank">${item.title}</a>
                        </div>
                        <div class="result-desc">${item.description || ''}</div>
                        <div class="result-meta">
                            ${source ? `<span class="badge ${badgeClass}">${source}</span>` : ''}
                            ${item.bloggername ? `<span>âœï¸ ${item.bloggername}</span>` : ''}
                            ${item.postdate ? `<span>ğŸ“… ${item.postdate}</span>` : ''}
                            ${item.pubDate ? `<span>ğŸ“… ${item.pubDate}</span>` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        function renderLocalResults(results, category) {
            let html = `
                <div class="results-list">
                    <h3 style="margin-bottom: 20px; color: var(--primary-dark);">
                        ğŸ“ ${category} ê²€ìƒ‰ ê²°ê³¼ (${results.length}ê±´)
                    </h3>
            `;
            
            results.forEach(item => {
                html += `
                    <div class="result-item">
                        <div class="result-title">
                            <a href="${item.link}" target="_blank">${item.title}</a>
                        </div>
                        <div class="result-meta">
                            <span class="badge badge-local">ğŸ“ ì§€ì—­ì •ë³´</span>
                            ${item.category ? `<span class="badge badge-outline">${item.category}</span>` : ''}
                        </div>
                        <div class="result-desc" style="margin-top: 10px;">
                            ${item.roadAddress ? `<div>ğŸ  ${item.roadAddress}</div>` : ''}
                            ${item.address ? `<div>ğŸ“Œ ${item.address}</div>` : ''}
                            ${item.telephone ? `<div>ğŸ“ ${item.telephone}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        function renderNoResults(category) {
            return `
                <div class="no-results">
                    <div class="no-results-icon">ğŸ“­</div>
                    <h3>"${category}" ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë‚˜ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</p>
                </div>
            `;
        }

        function renderError(message) {
            return `
                <div class="message-box error">
                    <p>âš ï¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${message}</p>
                    <p>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</p>
                </div>
            `;
        }

        // Enter í‚¤ë¡œ ê²€ìƒ‰
        document.getElementById('mainSearchInput')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performMainSearch();
            }
        });
    </script>
</body>
</html>
